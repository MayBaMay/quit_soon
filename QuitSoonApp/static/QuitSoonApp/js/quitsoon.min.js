/*!
 * Start Bootstrap -  v1.0.0 ()
 * Copyright 2013-2020
 * Licensed under  (https://github.com/BlackrockDigital/quit_soon/blob/master/LICENSE)
 */

!(function (i) {
  "use strict";
  i("#sidebarToggle, #sidebarToggleTop").on("click", function (e) {
    i("body").toggleClass("sidebar-toggled"),
      i(".sidebar").toggleClass("toggled"),
      i(".sidebar").hasClass("toggled") &&
        i(".sidebar .collapse").collapse("hide");
  }),
    i(window).resize(function () {
      i(window).width() < 768 && i(".sidebar .collapse").collapse("hide");
    }),
    i("body.fixed-nav .sidebar").on(
      "mousewheel DOMMouseScroll wheel",
      function (e) {
        var s, a;
        768 < i(window).width() &&
          ((a = (s = e.originalEvent).wheelDelta || -s.detail),
          (this.scrollTop += 30 * (a < 0 ? 1 : -1)),
          e.preventDefault());
      }
    ),
    i(document).on("scroll", function () {
      100 < i(this).scrollTop()
        ? i(".scroll-to-top").fadeIn()
        : i(".scroll-to-top").fadeOut();
    }),
    i(document).on("click", "a.scroll-to-top", function (e) {
      var s = i(this);
      i("html, body")
        .stop()
        .animate(
          { scrollTop: i(s.attr("href")).offset().top },
          1e3,
          "easeInOutExpo"
        ),
        e.preventDefault();
    }),
    i(".pass-status").on("click", function (e) {
      var s = i(".password-field"),
        a = i(".pass-status");
      "password" == s.prop("type")
        ? (s.prop("type", "text"), a.toggleClass("fa-eye fa-eye-slash"))
        : (s.prop("type", "password"), a.toggleClass("fa-eye-slash fa-eye"));
    }),
    i(".form-with-password").on("submit", function (e) {
      return i(".password-field").prop("type", "password"), !0;
    }),
    i("#NewNameForm").on("submit", function (e) {
      i(this);
      var a = i(this).find("input[type=submit]");
      i(".username-error").css("display", "none"),
        i(".newname-error").css("display", "none"),
        e.preventDefault(),
        i
          .ajax({ url: "/new_name/", type: "POST", data: i(this).serialize() })
          .done(function (e) {
            var s = jQuery.parseJSON(e);
            "success" == s.response
              ? (document.location.reload(!0),
                i("#modal_change_username").modal("hide"))
              : ("name already in db" == s.response
                  ? i(".username-error").css("display", "block")
                  : i(".newname-error").css("display", "block"),
                a.prop("disabled", !1));
          });
    }),
    i("#NewEmailForm").on("submit", function (e) {
      i(this);
      var a = i(this).find("input[type=submit]");
      i(".newemail-error").css("display", "none"),
        i(".dbemail-error").css("display", "none"),
        e.preventDefault(),
        i
          .ajax({ url: "/new_email/", type: "POST", data: i(this).serialize() })
          .done(function (e) {
            var s = jQuery.parseJSON(e);
            "success" == s.response
              ? (document.location.reload(!0),
                i("#modal_change_email").modal("hide"))
              : ("email already in DB" == s.response
                  ? i(".dbemail-error").css("display", "block")
                  : i(".newemail-error").css("display", "block"),
                a.prop("disabled", !1));
          });
    }),
    i("#NewPasswordForm").on("submit", function (e) {
      i(this);
      var a = i(this).find("input[type=submit]");
      i(".oldpwd-error").css("display", "none"),
        i(".newpwd-error").css("display", "none"),
        i(".dbpwd-error").css("display", "none"),
        i(".newpassword-error").css("display", "none"),
        e.preventDefault(),
        i
          .ajax({
            url: "/new_password/",
            type: "POST",
            data: i(this).serialize(),
          })
          .done(function (e) {
            var s = jQuery.parseJSON(e);
            "success" == s.response
              ? (document.location.reload(!0),
                i("#modal_change_password").modal("hide"))
              : ("incorrect old password" == s.response
                  ? i(".oldpwd-error").css("display", "block")
                  : "new password not confirmed" == s.response
                  ? i(".dbpwd-error").css("display", "block")
                  : "incorrect newpassword" == s.response
                  ? i(".newpwd-error").css("display", "block")
                  : i(".newpassword-error").css("display", "block"),
                a.prop("disabled", !1));
          });
    }),
    i("#noprofile").length && i("#modal_starting_parameters").modal("show"),
    i("#NewParametersForm").on("submit", function (e) {
      i("#choose_existing_pack").hasClass("active")
        ? (i("#id_type_cig").val(""),
          i("#id_brand").val(""),
          i("#id_qt_paquet").val(""),
          i("#id_price").val(""))
        : i("#create_pack_choice").hasClass("active") &&
          i("#id_ref_pack").val(""),
        document.location.reload(!0);
    }),
    newparameterspackform(),
    i(".nav li").on("click", function () {
      i(".nav li").removeClass("active"),
        i(this).addClass("active"),
        newparameterspackform();
    }),
    i(".fa-smoking").on("click", function () {
      i("#id_type_cig")
        .prop("required", !0)
        .removeClass("hide")
        .addClass("show");
    }),
    i(".cig-change").on("click", function (e) {
      "submit" == i(this).attr("id")
        ? (i(this)
            .siblings(".form-cig-change")
            .find("input[type=number]")
            .attr("type", "hidden"),
          i(this).siblings(".form-cig-change").submit())
        : (e.preventDefault(),
          i(".cig-change").prev().removeClass("hide").addClass("show"),
          i(".cig-change")
            .siblings(".form-cig-change")
            .removeClass("show")
            .addClass("hide"),
          i(".cig-change").removeAttr("id", "submit"),
          i(this).prev().removeClass("show").addClass("hide"),
          i(this)
            .siblings(".form-cig-change")
            .removeClass("hide")
            .addClass("show"),
          i(this).attr("id", "submit"));
    }),
    i("#alternativeform select[id=id_substitut]").prop("required", !1),
    i("#alternativeform input[id=id_nicotine]").prop("required", !1),
    i("#alternativeform select[id=id_type_activity]").prop("required", !0),
    i("#alternativeform input[id=id_activity]").prop("required", !0),
    i(".activity_form").removeClass("hide").addClass("show"),
    i(".substitut_form").removeClass("show").addClass("hide"),
    i("#alternativeform select[id=id_type_alternative]").on("change", function (
      e
    ) {
      console.log(i(this).val()),
        "Su" == i(this).val()
          ? (i(".activity_form").removeClass("show").addClass("hide"),
            i(".substitut_form").removeClass("hide").addClass("show"),
            i("#alternativeform input[id=id_activity]")
              .prop("required", !1)
              .val(""),
            i("#alternativeform select[id=id_substitut]").prop("required", !0),
            i("#alternativeform input[id=id_nicotine]").prop("required", !0))
          : (i(".activity_form").removeClass("hide").addClass("show"),
            i(".substitut_form").removeClass("show").addClass("hide"),
            i("#alternativeform select[id=id_substitut]")
              .prop("required", !1)
              .val(""),
            i("#alternativeform input[id=id_nicotine]")
              .prop("required", !1)
              .val(""),
            i("#alternativeform select[id=id_type_activity]").prop(
              "required",
              !0
            ),
            i("#alternativeform input[id=id_activity]").prop("required", !0));
    }),
    displayPaquetsFields(),
    i("#id_given_field").change(function () {
      this.checked
        ? (i(".show").removeClass("show").addClass("hide"),
          i(".showtypes").removeClass("showtypes").addClass("hidetypes"))
        : (i(".hidetypes").removeClass("hidetypes").addClass("showtypes"),
          displayPaquetsFields());
    }),
    i("#id_type_cig_field").on("change", function (e) {
      i(".show").removeClass("show").addClass("hide"), displayPaquetsFields();
    }),
    displayAlternativeFields(),
    i("#id_type_alternative_field").on("change", function (e) {
      i(".show").removeClass("show").addClass("hide"),
        i("#id_duration_hour").removeClass("hide").addClass("show"),
        i("#id_duration_min").removeClass("hide").addClass("show"),
        displayAlternativeFields();
    }),
    i("#healthform select[id=id_su_field]").on("change", function (e) {
      displayAlternativeFields();
    });
})(jQuery);
var dateField = document.querySelector(".currentDate"),
  timeField = document.querySelector(".currentTime"),
  date = new Date();
function displayPaquetsFields() {
  "IND" == $("#id_type_cig_field").val()
    ? $("#id_ind_pack_field").removeClass("hide").addClass("show")
    : "ROL" == $("#id_type_cig_field").val() &&
      $("#id_rol_pack_field").removeClass("hide").addClass("show");
}
function displayAlternativeFields() {
  var e = {
    type_alternative_field: $(
      "#healthform select[name=type_alternative_field]"
    ).serialize(),
    su_field: $("#healthform select[name=su_field]").serialize(),
  };
  $.ajax({ url: "/su_ecig/", type: "GET", data: e }).done(function (e) {
    "true" == jQuery.parseJSON(e).response
      ? ($("#id_ecig_vape_or_start").removeClass("hide").addClass("show"),
        $("#id_ecig_vape_or_start_0").removeClass("hide").addClass("show"),
        $("#id_ecig_vape_or_start_1").removeClass("hide").addClass("show"))
      : ($("#id_ecig_vape_or_start").removeClass("show").addClass("hide"),
        $("#id_ecig_vape_or_start_0").removeClass("show").addClass("hide"),
        $("#id_ecig_vape_or_start_1").removeClass("show").addClass("hide"));
  }),
    "Sp" == $("#id_type_alternative_field").val()
      ? $("#id_sp_field").removeClass("hide").addClass("show")
      : "So" == $("#id_type_alternative_field").val()
      ? $("#id_so_field").removeClass("hide").addClass("show")
      : "Lo" == $("#id_type_alternative_field").val()
      ? $("#id_lo_field").removeClass("hide").addClass("show")
      : "Su" == $("#id_type_alternative_field").val() &&
        ($("#id_su_field").removeClass("hide").addClass("show"),
        $("#id_duration_hour").removeClass("show").addClass("hide"),
        $("#id_duration_min").removeClass("show").addClass("hide"));
}
function newparameterspackform() {
  $("#choose_existing_pack").hasClass("active") &&
    (console.log("choose_existing_pack"),
    $("#existing_packs").removeClass("hide").addClass("show"),
    $(".newpackform").removeClass("show").addClass("hide"),
    $("#id_ref_pack").prop("required", !0),
    $("#id_type_cig").prop("required", !1),
    $("#id_brand").prop("required", !1),
    $("#id_qt_paquet").prop("required", !1),
    $("#id_price").prop("required", !1)),
    $("#create_pack_choice").hasClass("active") &&
      (console.log("create_pack_choice"),
      $(".newpackform").removeClass("hide").addClass("show"),
      $("#existing_packs").removeClass("show").addClass("hide"),
      $("#id_ref_pack").prop("required", !1),
      $("#id_type_cig").prop("required", !0),
      $("#id_brand").prop("required", !0),
      $("#id_qt_paquet").prop("required", !0),
      $("#id_price").prop("required", !0));
}
dateField &&
  (dateField.value =
    date.getFullYear().toString() +
    "-" +
    (date.getMonth() + 1).toString().padStart(2, 0) +
    "-" +
    date.getDate().toString().padStart(2, 0)),
  timeField &&
    (timeField.value =
      date.getHours().toString().padStart(2, 0) +
      ":" +
      date.getMinutes().toString().padStart(2, 0));
