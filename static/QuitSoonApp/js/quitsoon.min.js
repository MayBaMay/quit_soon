/*!
 * Start Bootstrap -  v1.0.0 ()
 * Copyright 2013-2020 
 * Licensed under  (https://github.com/BlackrockDigital/quit_soon/blob/master/LICENSE)
 */

!function(e){"use strict";e(".pass-status").on("click",(function(s){var i=e(".password-field"),a=e(".pass-status");"password"==i.prop("type")?(i.prop("type","text"),a.toggleClass("fa-eye fa-eye-slash")):(i.prop("type","password"),a.toggleClass("fa-eye-slash fa-eye"))})),e(".form-with-password").on("submit",(function(s){return e(".password-field").prop("type","password"),!0})),e("#NewNameForm").on("submit",(function(s){e(this);var i=e(this).find("input[type=submit]");e(".username-error").css("display","none"),e(".newname-error").css("display","none"),s.preventDefault(),e.ajax({url:"/new_name/",type:"POST",data:e(this).serialize()}).done((function(s){var a=jQuery.parseJSON(s);"success"==a.response?document.location.reload(!0):"name already in db"==a.response?(e(".username-error").css("display","block"),i.prop("disabled",!1)):(e(".newname-error").css("display","block"),i.prop("disabled",!1))}))})),e("#NewEmailForm").on("submit",(function(s){e(this);var i=e(this).find("input[type=submit]");e(".newemail-error").css("display","none"),e(".dbemail-error").css("display","none"),s.preventDefault(),e.ajax({url:"/new_email/",type:"POST",data:e(this).serialize()}).done((function(s){var a=jQuery.parseJSON(s);"success"==a.response?document.location.reload(!0):"email already in DB"==a.response?(e(".dbemail-error").css("display","block"),i.prop("disabled",!1)):(e(".newemail-error").css("display","block"),i.prop("disabled",!1))}))})),e("#NewPasswordForm").on("submit",(function(s){e(this);var i=e(this).find("input[type=submit]");e(".oldpwd-error").css("display","none"),e(".newpwd-error").css("display","none"),e(".dbpwd-error").css("display","none"),e(".newpassword-error").css("display","none"),s.preventDefault(),e.ajax({url:"/new_password/",type:"POST",data:e(this).serialize()}).done((function(s){var a=jQuery.parseJSON(s);"success"==a.response?document.location.reload(!0):"incorrect old password"==a.response?(e(".oldpwd-error").css("display","block"),i.prop("disabled",!1)):"new password not confirmed"==a.response?(e(".dbpwd-error").css("display","block"),i.prop("disabled",!1)):"incorrect newpassword"==a.response?(e(".newpwd-error").css("display","block"),i.prop("disabled",!1)):(e(".newpassword-error").css("display","block"),i.prop("disabled",!1))}))})),e("#noprofile").length,e("#NewParametersForm").on("submit",(function(){e("#choose_existing_pack").hasClass("active")?(e("#id_type_cig").val(""),e("#id_brand").val(""),e("#id_qt_paquet").val(""),e("#id_price").val("")):e("#create_pack_choice").hasClass("active")&&e("#id_ref_pack").val(""),document.location.reload(!0)})),newparameterspackform(),e(".param-tab").on("click",(function(){newparameterspackform()})),e(".fa-smoking").on("click",(function(){e("#id_type_cig").prop("required",!0).removeClass("hide").addClass("show")})),e(".cig-change").on("click",(function(s){"submit"==e(this).attr("id")?(e(this).siblings(".form-cig-change").find("input[type=number]").attr("type","hidden"),e(this).siblings(".form-cig-change").submit()):(s.preventDefault(),e(".cig-change").prev().removeClass("hide").addClass("show"),e(".cig-change").siblings(".form-cig-change").removeClass("show").addClass("hide"),e(".cig-change").removeAttr("id","submit"),e(this).prev().removeClass("show").addClass("hide"),e(this).siblings(".form-cig-change").removeClass("hide").addClass("show"),e(this).attr("id","submit"))})),e("#alternativeform select[id=id_substitut]").prop("required",!1),e("#alternativeform input[id=id_nicotine]").prop("required",!1),e("#alternativeform select[id=id_type_activity]").prop("required",!0),e("#alternativeform input[id=id_activity]").prop("required",!0),e(".activity_form").removeClass("hide").addClass("show"),e(".substitut_form").removeClass("show").addClass("hide"),e("#alternativeform select[id=id_type_alternative]").on("change",(function(s){"Su"==e(this).val()?(e(".activity_form").removeClass("show").addClass("hide"),e(".substitut_form").removeClass("hide").addClass("show"),e("#alternativeform select[id=id_type_activity]").prop("required",!1).val(""),e("#alternativeform input[id=id_activity]").prop("required",!1).val(""),e("#alternativeform select[id=id_substitut]").prop("required",!0),e("#alternativeform input[id=id_nicotine]").prop("required",!0)):(e(".activity_form").removeClass("hide").addClass("show"),e(".substitut_form").removeClass("show").addClass("hide"),e("#alternativeform select[id=id_substitut]").prop("required",!1).val(""),e("#alternativeform input[id=id_nicotine]").prop("required",!1).val(""),e("#alternativeform select[id=id_type_activity]").prop("required",!0),e("#alternativeform input[id=id_activity]").prop("required",!0))})),displayPaquetsFields(),e("#id_given_field").change((function(){this.checked?e("#cig_details").removeClass("showflex").addClass("hide"):(e("#cig_details").removeClass("hide").addClass("showflex"),displayPaquetsFields())})),e("#id_type_cig_field").on("change",(function(s){e("#cig_details").hasClass("showflex")&&(e(".show").removeClass("show").addClass("hide"),displayPaquetsFields())})),"/health/"===window.location.pathname&&(displayAlternativeFields(),e("#id_type_alternative_field").on("change",(function(s){e(".show").removeClass("show").addClass("hide"),e("#duration-group").removeClass("hide").addClass("show-flex"),e("#id_duration_hour").removeClass("hide").addClass("show"),e("#id_duration_min").removeClass("hide").addClass("show"),displayAlternativeFields()})),e("#healthform select[id=id_su_field]").on("change",(function(e){displayAlternativeFields()})))}(jQuery);var dateField=document.querySelector(".currentDate"),timeField=document.querySelector(".currentTime"),date=new Date;function displayPaquetsFields(){$("#cig_details").hasClass("showflex")&&("IND"==$("#id_type_cig_field").val()?$("#id_ind_pack_field").removeClass("hide").addClass("show"):"ROL"==$("#id_type_cig_field").val()&&$("#id_rol_pack_field").removeClass("hide").addClass("show"))}function displayAlternativeFields(){var e={type_alternative_field:$("#healthform select[name=type_alternative_field]").serialize(),su_field:$("#healthform select[name=su_field]").serialize()};$.ajax({url:"/su_ecig/",type:"GET",data:e}).done((function(e){"true"==jQuery.parseJSON(e).response?($("#id_ecig_vape_or_start").removeClass("hide").addClass("show"),$("#id_ecig_vape_or_start_0").removeClass("hide").addClass("show"),$("#id_ecig_vape_or_start_1").removeClass("hide").addClass("show")):($("#id_ecig_vape_or_start").removeClass("show").addClass("hide"),$("#id_ecig_vape_or_start_0").removeClass("show").addClass("hide"),$("#id_ecig_vape_or_start_1").removeClass("show").addClass("hide"))})),"Sp"==$("#id_type_alternative_field").val()?$("#id_sp_field").removeClass("hide").addClass("show"):"So"==$("#id_type_alternative_field").val()?$("#id_so_field").removeClass("hide").addClass("show"):"Lo"==$("#id_type_alternative_field").val()?$("#id_lo_field").removeClass("hide").addClass("show"):"Su"==$("#id_type_alternative_field").val()&&($("#id_su_field").removeClass("hide").addClass("show"),$("#duration-group").removeClass("show-flex").addClass("hide"),$("#id_duration_hour").removeClass("show").addClass("hide"),$("#id_duration_min").removeClass("show").addClass("hide"))}function newparameterspackform(){$("#choose_existing_pack").hasClass("active")&&($("#id_ref_pack").prop("required",!0),$("#id_type_cig").prop("required",!1),$("#id_brand").prop("required",!1),$("#id_qt_paquet").prop("required",!1),$("#id_price").prop("required",!1)),$("#create_pack_choice").hasClass("active")&&($("#id_ref_pack").prop("required",!1),$("#id_type_cig").prop("required",!0),$("#id_brand").prop("required",!0),$("#id_qt_paquet").prop("required",!0),$("#id_price").prop("required",!0))}dateField&&(dateField.value=date.getFullYear().toString()+"-"+(date.getMonth()+1).toString().padStart(2,0)+"-"+date.getDate().toString().padStart(2,0)),timeField&&(timeField.value=date.getHours().toString().padStart(2,0)+":"+date.getMinutes().toString().padStart(2,0));